(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(28)},25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),i=(a(25),a(26),a(16)),l=a(15),u=a(6),s=a(7),f=a(9),v=a(10),h=a(19),d=a(17),m=a(11),p=a(8),w=a(2),b=a(12),y=Object(b.a)("currentPlayer"),g=Object(b.a)("board");function O(){for(var e=[],t=0;t<8;t++)e[t]=[];for(var a=0;a<3;a++)for(var n=0;n<8;n++)a%2===0&&n%2===0?e[a][n]={team:0,king:!1}:a%2===1&&n%2===1&&(e[a][n]={team:0,king:!1});for(var r=5;r<8;r++)for(var c=0;c<8;c++)r%2===0&&c%2===0?e[r][c]={team:1,king:!1}:r%2===1&&c%2===1&&(e[r][c]={team:1,king:!1});return e}var k=function(){function e(){Object(f.a)(this,e),Object.defineProperty(this,y,{writable:!0,value:1}),Object.defineProperty(this,g,{writable:!0,value:O()})}return Object(v.a)(e,[{key:"getPieceOnSquare",value:function(e,t){return Object(w.a)(this,g)[g][e][t]}},{key:"move",value:function(e,t,a,n){var r=this;!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var n=0,r=t;n<r.length;n++){var c=r[n];if(c<0||c>=8)throw new Error("Invalid coordinates")}}(e,t,a,n);var c,o=this.getPieceOnSquare(e,t),i=this.getPieceOnSquare(a,n);if((void 0===o||o.team!==this.currentPlayer||void 0!==i||!function(e,t,a,n,r){return e.king?1===Math.abs(t-n)&&1===Math.abs(a-r):1===e.team?t-n===1&&1===Math.abs(a-r):n-t===1&&1===Math.abs(a-r)}(o,e,t,a,n))&&!(c=function(e,t,a,n){var r=new Map;return r["".concat(a," ").concat(n)]=[],function e(t,a,n,r,c){if(0===a.team||a.king){if(n+2<8&&r+2<8&&void 0===t[n+2][r+2]&&void 0!==t[n+1][r+1]&&t[n+1][r+1].team!==a.team){c["".concat(n+2," ").concat(r+2)]=[].concat(Object(p.a)(c["".concat(n," ").concat(r)]),[{row:n+1,col:r+1}]);var o=t.map(function(e,t){return e.map(function(e,c){return n===t&&r===c?void 0:n+1===t&&r+1===c?void 0:n+2===t&&r+2===c?a:e})});e(o,a,n+2,r+2,c)}if(n+2<8&&r-2>=0&&void 0===t[n+2][r-2]&&void 0!==t[n+1][r-1]&&t[n+1][r-1].team!==a.team){c["".concat(n+2," ").concat(r-2)]=[].concat(Object(p.a)(c["".concat(n," ").concat(r)]),[{row:n+1,col:r-1}]);var i=t.map(function(e,t){return e.map(function(e,c){return n===t&&r===c?void 0:n+1===t&&r-1===c?void 0:n+2===t&&r-2===c?a:e})});e(i,a,n+2,r-2,c)}}if(1===a.team||a.king){if(n-2>=0&&r+2<8&&void 0===t[n-2][r+2]&&void 0!==t[n-1][r+1]&&t[n-1][r+1].team!==a.team){c["".concat(n-2," ").concat(r+2)]=[].concat(Object(p.a)(c["".concat(n," ").concat(r)]),[{row:n-1,col:r+1}]);var l=t.map(function(e,t){return e.map(function(e,c){return n===t&&r===c?void 0:n-1===t&&r+1===c?void 0:n-2===t&&r+2===c?a:e})});e(l,a,n-2,r+2,c)}if(n-2>=0&&r-2>=0&&void 0===t[n-2][r-2]&&void 0!==t[n-1][r-1]&&t[n-1][r-1].team!==a.team){c["".concat(n-2," ").concat(r-2)]=[].concat(Object(p.a)(c["".concat(n," ").concat(r)]),[{row:n-1,col:r-1}]);var u=t.map(function(e,t){return e.map(function(e,c){return n===t&&r===c?void 0:n-1===t&&r-1===c?void 0:n-2===t&&r-2===c?a:e})});e(u,a,n-2,r-2,c)}}}(e,t,a,n,r),r["".concat(a," ").concat(n)]=void 0,console.log(r),r}(Object(w.a)(this,g)[g],o,e,t)["".concat(a," ").concat(n)]))throw new Error("Invalid move.");Object(w.a)(this,g)[g][a][n]=Object(w.a)(this,g)[g][e][t],Object(w.a)(this,g)[g][e][t]=void 0,c&&c.forEach(function(e){Object(w.a)(r,g)[g][e.row][e.col]=void 0}),1===o.team&&0===a?o.king=!0:0===o.team&&7===a&&(o.king=!0),0===Object(w.a)(this,y)[y]?Object(w.a)(this,y)[y]=1:Object(w.a)(this,y)[y]=0}},{key:"currentPlayer",get:function(){return Object(w.a)(this,y)[y]}}]),e}();function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(d.a)(this,a)}}var E=function(e){Object(h.a)(a,e);var t=P(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).canvasRef=r.a.createRef(),e.model=new k,e.state={board:e.getBoard2DArray(),selectedCell:{row:-1,col:-1}},e}return Object(v.a)(a,[{key:"componentDidMount",value:function(){this.drawBoard()}},{key:"componentDidUpdate",value:function(){this.drawBoard()}},{key:"handleClick",value:function(e){var t=this.canvasRef.current.getBoundingClientRect(),a=e.clientX-t.left,n=e.clientY-t.top,r=Math.floor(n/100),c=Math.floor(a/100);this.props.team1Perspective||(r=7-r,c=7-c);var o=this.state.selectedCell,i=o.row,l=o.col,u=this.model.getPieceOnSquare(r,c);if(-1===i&&void 0!==u&&u.team===this.model.currentPlayer)this.setState({selectedCell:{row:r,col:c}});else if(-1!==i){try{this.model.move(i,l,r,c)}catch(s){}this.setState({board:this.getBoard2DArray(),selectedCell:{row:-1,col:-1}})}}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasRef,width:800,height:800,onClick:this.handleClick.bind(this)})}},{key:"drawBoard",value:function(){for(var e=this.canvasRef.current.getContext("2d"),t=0;t<8;t++)for(var a=0;a<8;a++)this.drawCell(e,t,a);var n=this.state.selectedCell,r=n.row,c=n.col;-1!==r&&-1!==c&&this.drawCell(e,r,c)}},{key:"drawCell",value:function(e,t,a){e.beginPath(),t===this.state.selectedCell.row&&a===this.state.selectedCell.col&&(e.shadowColor="yellow",e.shadowBlur=15),e.fillStyle=function(e,t){return e%2===0&&t%2===0||e%2===1&&t%2===1?"red":"black"}(t,a),this.props.team1Perspective?e.fillRect(100*a,100*t,100,100):e.fillRect(100*(7-a),100*(7-t),100,100),e.shadowBlur=0,this.drawPiece(e,t,a)}},{key:"drawPiece",value:function(e,t,a){var n=this.model.getPieceOnSquare(t,a);void 0!==n&&(this.props.team1Perspective||(t=7-t,a=7-a),e.beginPath(),e.fillStyle=0===n.team?"blue":"yellow",e.arc(100*a+50,100*t+50,40,0,2*Math.PI),e.fill(),n.king&&(e.beginPath(),e.fillStyle="gray",e.arc(100*a+50,100*t+50,10,0,2*Math.PI),e.fill()))}},{key:"getBoard2DArray",value:function(){for(var e=[],t=0;t<8;t++){e[t]=[];for(var a=0;a<8;a++)e[t][a]=this.model.getPieceOnSquare(t,a)}return e}}]),a}(r.a.Component),j=a(18);var C=function(e){var t=e.dispatch;return r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(j.a,{variant:"primary",onClick:function(){return t({type:"TOGGLE_PERSPECTIVE"})}},"Change Perspective")))};a(27);function R(e,t){switch(t.type){case"TOGGLE_PERSPECTIVE":return{team1Perspective:!e.team1Perspective};default:throw new Error("unknown action")}}var S=function(){var e=r.a.useReducer(R,{team1Perspective:!0}),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{className:"checkers-app"},r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement("h1",null,"Checkers"))),r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(E,{team1Perspective:a.team1Perspective}))),r.a.createElement(u.a,null,r.a.createElement(s.a,null,r.a.createElement(C,{dispatch:n})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[20,1,2]]]);
//# sourceMappingURL=main.77ef3dc9.chunk.js.map